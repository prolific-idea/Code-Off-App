<div ng-controller="updateChallengeController" ng-show="challenge != null || challenge != undefined">
    <div class="code-off-leaderboard-border">
        <div ng-if="DirtyForm">
            <div style="position: fixed; width: 100%; height: 110%; top: 0px; left: 0px; background-color: rgba(0,0,0,0.4); z-index: 900000;">
                <div style="width: 40%; margin: 200px auto auto;" class="alert alert-success"
                     align="center"
                     role="alert" ng-if="updateNotification == true">
                    <h4 style="text-align: center;">Challenge has been update</h4>
                    <button class="btn btn-primary btn-lg" ng-click="OK()"><span
                            class="fa fa-thumbs-up"></span>&nbsp;OK
                    </button>
                </div>
                <div style="width: 40%; margin: 200px auto auto;" class="alert alert-danger"
                     align="center"
                     role="alert" ng-if="errorNotification == true">
                    <h4 style="text-align: center;">Error occurred please look at the console for more
                        information.</h4>
                    <button class="btn btn-primary btn-lg" ng-click="OKError()"><span
                            class="fa fa-thumbs-up"></span>&nbsp;OK
                    </button>
                </div>
            </div>
        </div>
        <ng-form name="updateChallengeForm">
            <h2 class="h2" style="color: #797979; font-weight: 700;">Update challenge</h2>

            <div class="form-group">
                <label for="ChallengeUrl">Challenge Url: https://github.com/</label><br/>
                <input
                        id="ChallengeUrl"
                        name="ChallengeUrl"
                        class="form-control"
                        placeholder="Challenge Url"
                        ng-model="challenge.url"
                        required/>

                <div ng-messages="updateChallengeForm.ChallengeUrl.$error"
                     ng-show="updateChallengeForm.ChallengeUrl.$touched && updateChallengeForm.ChallengeUrl.$invalid">
                    <div class="error" style="color:red;" ng-message="required">Please complete the url.</div>
                </div>
            </div>
            <div class="form-group">
                <label for="ChallengeSolution">Select solution file</label><br/>
                <input
                        id="ChallengeSolution"
                        name="ChallengeSolution"
                        type="file"
                        class="form-control"
                        value="{{challenge.solution}}"
                        placeholder="Challenge Solution"
                        custom-ng-change="getTheFiles"
                />

                <!--<div ng-messages="updateChallengeForm.ChallengeSolution.$error"
                     ng-show="updateChallengeForm.ChallengeSolution.$touched && updateChallengeForm.ChallengeSolution.$invalid">
                    <div class="error" style="color:red;" ng-message="required">Please select a file.</div>
                </div>-->
            </div>
            <div class="form-group">
                <label for="ChallengeSolutionFilePath">Solution File Path: </label><br/>
                <input
                        id="ChallengeSolutionFilePath"
                        name="ChallengeSolutionFilePath"
                        class="form-control"
                        placeholder="Challenge Solution File Path"
                        ng-model="challenge.solutionFilePath"
                        required/>

                <div ng-messages="updateChallengeForm.ChallengeSolutionFilePath.$error"
                     ng-show="updateChallengeForm.ChallengeSolutionFilePath.$touched && updateChallengeForm.ChallengeSolutionFilePath.$invalid">
                    <div class="error" style="color:red;" ng-message="required">Please provide the solution file
                        path.
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="ChallengeStartDate">Challenge Start Date</label><br/>

                <p class="input-group">
                    <input type="text" id="ChallengeStartDate" name="ChallengeStartDate" class="form-control"
                           uib-datepicker-popup="{{format}}" ng-model="challenge.startDate"
                           ng-model-options="{timezone: '-1200'}" is-open="startDatePopup.opened"
                           datepicker-options="dateOptions" ng-required="true" close-text="Close"/>
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="openStartDate()"><i
                                class="glyphicon glyphicon-calendar"></i>
                        </button>
                    </span>
                </p>

                <div ng-messages="createChallengeForm.ChallengeStartDate.$error"
                     ng-show="createChallengeForm.ChallengeStartDate.$touched && createChallengeForm.ChallengeStartDate.$invalid">
                    <div style="color:red;" ng-message="required">Please provide a start date.</div>
                </div>
            </div>
            <div class="form-group">
                <label for="ChallengeStartTime">Challenge Start Time</label><br/>
                <uib-timepicker id="ChallengeStartTime" name="ChallengeStartTime" ng-model="startTime" hour-step="1"
                                minute-step="1" ng-change="setStartTime()"
                                show-meridian="false"></uib-timepicker>
                <div ng-messages="createChallengeForm.ChallengeStartTime.$error"
                     ng-show="createChallengeForm.ChallengeStartTime.$touched && createChallengeForm.ChallengeStartTime.$invalid">
                    <div style="color:red;" ng-message="required">Please provide a start time.</div>
                </div>
            </div>
            <div class="form-group">
                <label for="ChallengeEndDate">Challenge End Date</label><br/>

                <p class="input-group">
                    <input type="text" id="ChallengeEndDate" name="ChallengeEndDate" class="form-control"
                           uib-datepicker-popup="{{format}}" ng-model="challenge.endDate"
                           ng-model-options="{timezone: '-1200'}" is-open="endDatePopup.opened"
                           datepicker-options="dateOptions" ng-required="true" close-text="Close"/>
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="openEndDate()"><i
                                class="glyphicon glyphicon-calendar"></i>
                        </button>
                    </span>
                </p>

                <div ng-messages="createChallengeForm.ChallengeEndDate.$error"
                     ng-show="createChallengeForm.ChallengeEndDate.$touched && createChallengeForm.ChallengeEndDate.$invalid">
                    <div style="color:red;" ng-message="required">Please provide an end date.</div>
                </div>
            </div>
            <div class="form-group">
                <label for="ChallengeEndTime">Challenge End Time</label><br/>
                <uib-timepicker id="ChallengeEndTime" name="ChallengeEndTime" ng-model="endTime" hour-step="1"
                                minute-step="1" ng-change="setEndTime()"
                                show-meridian="false"></uib-timepicker>
                <div ng-messages="createChallengeForm.ChallengeEndTime.$error"
                     ng-show="createChallengeForm.ChallengeEndTime.$touched && createChallengeForm.ChallengeEndTime.$invalid">
                    <div style="color:red;" ng-message="required">Please provide an end time.</div>
                </div>
            </div>
            <div class="form-group">
                <label for="numberOfLinesToCompare">Number of lines to compare: </label><br/><input
                    id="numberOfLinesToCompare" type="number"
                    name="numberOfLinesToCompare" min="0" class="form-control"
                    placeholder="Number of lines to compare"
                    ng-model="challenge.numberOfLinesToCompare"
                    required/>

                <div ng-messages="updateChallengeForm.numberOfLinesToCompare.$error"
                     ng-show="updateChallengeForm.numberOfLinesToCompare.$touched && updateChallengeForm.numberOfLinesToCompare.$invalid">
                    <div style="color:red;" ng-message="required">Please provide the number of lines to
                        compare.
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-default"
                    ng-disabled="updateChallengeForm.$invalid || DirtyForm"
                    ng-click="Update();">
                Update challenge
            </button>
            <button type="submit" class="btn btn-default" ng-click="Cancel();">
                Cancel
            </button>
        </ng-form>
    </div>
</div>